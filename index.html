/* Base styles and variables remain the same */

/* Mobile-First Media Queries */
@media (max-width: 480px) {
    .nav-logo span {
        font-size: 18px;
    }

    .nav-logo img {
        height: 40px;
    }

    .hero h1 {
        font-size: 2rem;
        padding: 0 15px;
    }

    .hero p {
        font-size: 1rem;
        padding: 0 15px;
    }

    .cta-button {
        width: 80%;
        margin: 10px auto;
        display: block;
    }

    .services-grid,
    .process-grid,
    .testimonials-grid {
        grid-template-columns: 1fr;
        padding: 0 15px;
    }

    .service-card,
    .testimonial-card {
        padding: 20px;
    }

    .contact-form {
        padding: 0 15px;
    }
}

/* Tablet Media Queries */
@media (min-width: 481px) and (max-width: 768px) {
    .nav-container {
        padding: 0 20px;
    }

    .hero h1 {
        font-size: 2.5rem;
    }

    .services-grid,
    .process-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        padding: 0 20px;
    }

    .testimonials-grid {
        grid-template-columns: 1fr;
        max-width: 500px;
        margin: 0 auto;
    }
}

/* Mobile Navigation */
.mobile-nav {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.95);
    z-index: 1000;
    padding: 20px;
}

.mobile-nav.active {
    display: block;
}

.mobile-nav-links {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    gap: 20px;
}

.mobile-nav-links a {
    color: var(--white);
    text-decoration: none;
    font-size: 1.2rem;
    padding: 10px;
}

.close-menu {
    position: absolute;
    top: 20px;
    right: 20px;
    color: var(--white);
    font-size: 24px;
    background: none;
    border: none;
    cursor: pointer;
}

/* Touch-friendly dropdown */
@media (max-width: 768px) {
    .dropdown-menu {
        position: static;
        background: transparent;
        box-shadow: none;
        display: none;
        padding-left: 20px;
    }

    .dropdown.active .dropdown-menu {
        display: block;
    }

    .dropdown > a {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
    }
}
<!-- Updated Navigation Structure -->
<nav class="nav">
    <div class="nav-container">
        <a href="#home" class="nav-logo">
            <img src="Secondary.png" alt="Sioux Clean Solutions Logo">
            <span>Sioux Clean Solutions</span>
        </a>
        <button class="menu-btn" aria-label="Open Menu">
            <i class="fas fa-bars"></i>
        </button>
        <!-- Mobile Navigation -->
        <div class="mobile-nav">
            <button class="close-menu" aria-label="Close Menu">
                <i class="fas fa-times"></i>
            </button>
            <div class="mobile-nav-links">
                <a href="#home" class="mobile-link">Home</a>
                <div class="dropdown">
                    <a href="#services" class="mobile-link">Services <i class="fas fa-chevron-down"></i></a>
                    <div class="dropdown-menu">
                        <a href="residential-cleaning.html">Residential Cleaning</a>
                        <a href="commercial-cleaning.html">Commercial Cleaning</a>
                        <a href="deep-clean.html">Deep Cleaning</a>
                        <a href="move-in-move-out-cleaning.html">Move-in/Move-out</a>
                    </div>
                </div>
                <a href="#process" class="mobile-link">Process</a>
                <a href="#testimonials" class="mobile-link">Testimonials</a>
                <a href="#contact" class="mobile-link">Contact</a>
                <a href="tel:6054128105" class="phone-number mobile-phone">
                    <i class="fas fa-phone"></i>
                    (605) 412-8105
                </a>
            </div>
        </div>
        <!-- Desktop Navigation -->
        <div class="nav-links desktop-only">
            <!-- ... existing desktop navigation ... -->
        </div>
    </div>
</nav>

<!-- Updated JavaScript for better mobile handling -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Mobile Menu Handling
        const menuBtn = document.querySelector('.menu-btn');
        const closeBtn = document.querySelector('.close-menu');
        const mobileNav = document.querySelector('.mobile-nav');
        const mobileLinks = document.querySelectorAll('.mobile-link');
        const dropdowns = document.querySelectorAll('.dropdown');

        // Open mobile menu
        menuBtn.addEventListener('click', () => {
            mobileNav.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        });

        // Close mobile menu
        closeBtn.addEventListener('click', () => {
            mobileNav.classList.remove('active');
            document.body.style.overflow = '';
        });

        // Handle mobile links
        mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileNav.classList.remove('active');
                document.body.style.overflow = '';
            });
        });

        // Handle dropdowns on mobile
        dropdowns.forEach(dropdown => {
            const dropdownToggle = dropdown.querySelector('a');
            dropdownToggle.addEventListener('click', (e) => {
                if (window.innerWidth <= 768) {
                    e.preventDefault();
                    dropdown.classList.toggle('active');
                }
            });
        });

        // Touch event handling for better mobile interaction
        document.addEventListener('touchstart', handleTouchStart, false);
        document.addEventListener('touchmove', handleTouchMove, false);

        let xDown = null;
        let yDown = null;

        function handleTouchStart(evt) {
            xDown = evt.touches[0].clientX;
            yDown = evt.touches[0].clientY;
        }

        function handleTouchMove(evt) {
            if (!xDown || !yDown) return;

            const xUp = evt.touches[0].clientX;
            const yUp = evt.touches[0].clientY;

            const xDiff = xDown - xUp;
            const yDiff = yDown - yUp;

            if (Math.abs(xDiff) > Math.abs(yDiff)) {
                if (xDiff > 0) {
                    // Swipe left - close menu
                    mobileNav.classList.remove('active');
                    document.body.style.overflow = '';
                }
            }

            xDown = null;
            yDown = null;
        }

        // Smooth scrolling with offset for fixed header
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const headerOffset = 70;
                const element = document.querySelector(this.getAttribute('href'));
                const elementPosition = element.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            });
        });

        // Form improvements for mobile
        const form = document.querySelector('.contact-form');
        const inputs = form.querySelectorAll('input, textarea');

        inputs.forEach(input => {
            // Add active state for better touch feedback
            input.addEventListener('focus', () => {
                input.parentElement.classList.add('active');
            });

            input.addEventListener('blur', () => {
                input.parentElement.classList.remove('active');
            });

            // Auto-expand textarea
            if (input.tagName.toLowerCase() === 'textarea') {
                input.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = this.scrollHeight + 'px';
                });
            }
        });

        // Responsive image loading
        function loadResponsiveImages() {
            const images = document.querySelectorAll('img[data-src]');
            images.forEach(img => {
                if (window.innerWidth <= 768) {
                    img.src = img.getAttribute('data-src-mobile');
                } else {
                    img.src = img.getAttribute('data-src');
                }
            });
        }

        window.addEventListener('resize', loadResponsiveImages);
        loadResponsiveImages();
    });
</script>
